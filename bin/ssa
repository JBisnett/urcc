#!/usr/bin/ruby

Urcc_path = File.expand_path( File.dirname(__FILE__) )[0..-5]
$LOAD_PATH.unshift(Urcc_path+"/src")
$LOAD_PATH.unshift(Urcc_path+"/bin")

require 'ssa/ssa'

def compile( prog )
  cfg = CFG.new(prog)
  ssa = SSAPass.new(cfg)
  # tssa = TSSAPass.new(cfg)
  print cfg.c_dump
  # opt = OptPass.new(cfg)
  cfg.update_prog
end

puts $LOAD_PATH
load 'urcc'
